<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Maine Lobster Dealer Tycoon</title>
    <link rel="stylesheet" href="css/style.css">
</head>
<body>
    <!-- Welcome Screen - Atmospheric Dawn Scene -->
    <div id="welcome-screen" class="welcome-screen">
        <!-- Atmospheric Hero Background -->
        <div class="welcome-hero">
            <div class="hero-sky"></div>
            <div class="hero-sun"></div>
            <div class="hero-ocean"></div>
            <div class="hero-dock-silhouette"></div>
            <div class="hero-lighthouse"></div>
            <div class="hero-lobster-silhouette">ü¶û</div>
        </div>
        <!-- Content Overlay -->
        <div class="welcome-content">
            <h1 class="welcome-title">Maine Lobster<br>Dealer Tycoon</h1>
            <p class="welcome-tagline">Buy low. Sell high. Build your empire.</p>
            <button id="start-game-btn" class="btn-ceremony">Begin Your Run</button>
        </div>
    </div>

    <!-- Tutorial Overlay -->
    <div id="tutorial-overlay" class="tutorial-overlay" style="display: none;">
        <div class="tutorial-backdrop"></div>
        <div class="tutorial-box" id="tutorial-box">
            <div class="tutorial-header">
                <span class="tutorial-step" id="tutorial-step">1/8</span>
                <h3 id="tutorial-title">Welcome!</h3>
            </div>
            <p class="tutorial-message" id="tutorial-message">Tutorial message here</p>
            <div class="tutorial-buttons">
                <button id="tutorial-skip" class="btn btn-small">Skip Tutorial</button>
                <button id="tutorial-next" class="btn btn-primary">Next</button>
            </div>
        </div>
        <div class="tutorial-highlight" id="tutorial-highlight"></div>
    </div>

    <div class="game-container">
        <!-- Header -->
        <header class="game-header">
            <!-- Mobile: Compact Day Card -->
            <div class="day-card">
                <div class="day-card-main">
                    <span class="day-card-day">Day <span id="day-mobile">1</span></span>
                    <span class="day-card-location" id="location-mobile">Stonington</span>
                </div>
                <div class="day-card-metrics">
                    <span class="day-card-cash">$<span id="cash-mobile">5,000</span></span>
                    <span class="day-card-signal" id="market-signal-mobile">Market: Stable</span>
                </div>
                <div class="day-card-buttons">
                    <button id="map-btn-mobile" class="btn btn-tiny">üó∫Ô∏è</button>
                    <button id="shop-btn-mobile" class="btn btn-tiny">üõí</button>
                    <button id="bank-btn-mobile" class="btn btn-tiny">üè¶</button>
                    <button id="stats-btn-mobile" class="btn btn-tiny">üìä</button>
                </div>
            </div>

            <!-- Desktop: Full Header -->
            <div class="header-desktop">
                <h1>Maine Lobster Dealer Tycoon</h1>
                <div class="status-bar">
                    <div class="status-row">
                        <span class="cash">Cash: $<span id="cash">5,000</span></span>
                        <span class="debt">Debt: $<span id="debt">0</span></span>
                        <span class="date">Day <span id="day">1</span>/<span id="total-days">30</span></span>
                        <span class="countdown" id="countdown">üèñÔ∏è <span id="days-left">30</span> days left</span>
                    </div>
                    <div class="status-row goal-row">
                        <span class="goal-label">Goal Progress:</span>
                        <span class="goal-progress">
                            <span class="goal-bar-container">
                                <span class="goal-bar" id="goal-bar"></span>
                            </span>
                            <span class="goal-tier" id="goal-tier">‚≠ê $10K</span>
                        </span>
                    </div>
                    <div class="status-row">
                        <span class="weather">
                            <span id="weather-icon">‚òÄÔ∏è</span> <span id="weather-name">Sunny</span>
                            <span class="forecast">Tomorrow: <span id="tomorrow-weather">‚òÄÔ∏è</span></span>
                        </span>
                        <span id="market-trend" class="trend-stable">‚û°Ô∏è Stable</span>
                    </div>
                    <div class="status-row daily-tracker">
                        <span class="daily-stat spent">Spent: $<span id="daily-spent">0</span></span>
                        <span class="daily-stat earned">Earned: $<span id="daily-earned">0</span></span>
                        <span class="daily-stat" id="daily-profit">Net: $0</span>
                    </div>
                    <div class="status-row location-row">
                        <span class="location-info">
                            <span id="location-emoji">üé£</span>
                            <span id="location-name">Stonington</span>
                            <span class="location-traits" id="location-traits">Fishing Hub</span>
                        </span>
                        <span class="price-mods">
                            <span class="buy-mod" title="Buy price modifier">Buy: <span id="buy-mod">-20%</span></span>
                            <span class="sell-mod" title="Sell price modifier">Sell: <span id="sell-mod">-15%</span></span>
                        </span>
                    </div>
                </div>
                <div class="header-buttons">
                    <button id="map-btn" class="btn btn-small">Map</button>
                    <button id="shop-btn" class="btn btn-small">Shop</button>
                    <button id="bank-btn" class="btn btn-small">Bank</button>
                    <button id="stats-btn" class="btn btn-small">Stats</button>
                </div>
            </div>
        </header>

        <!-- Persistent Summary Bar -->
        <div class="summary-bar">
            <div class="summary-item">
                <span class="summary-label">Cash</span>
                <span class="summary-value" id="summary-cash">$5,000</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">Inventory</span>
                <span class="summary-value" id="summary-inventory">0 lbs</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">Freshness</span>
                <span class="summary-value" id="summary-freshness">100%</span>
            </div>
            <div class="summary-item">
                <span class="summary-label">Reputation</span>
                <span class="summary-value" id="summary-reputation">Dock Nobody</span>
            </div>
        </div>

        <!-- Animated Scene Overlay -->
        <div class="scene-overlay" id="scene-overlay">
            <!-- Weather effects container -->
            <div class="weather-effects" id="weather-effects"></div>
            <!-- Boat arrival animation -->
            <div class="boat-arrival" id="boat-arrival">
                <div class="arrival-boat">üö§</div>
                <div class="arrival-wake"></div>
            </div>
            <!-- Truck travel animation -->
            <div class="truck-travel" id="truck-travel">
                <div class="travel-truck">üöö</div>
                <div class="travel-road"></div>
            </div>
        </div>

        <!-- Main Game Area - Responsive Layout -->
        <main class="game-main">
            <!-- Left Column: Markets (Desktop) -->
            <div class="column column-left">
                <section class="panel markets-panel">
                    <h2>Markets</h2>
                    <div class="current-location-card">
                        <div class="location-header">
                            <span class="location-icon" id="markets-location-icon">üé£</span>
                            <span class="location-name" id="markets-location-name">Stonington</span>
                        </div>
                        <div class="location-prices">
                            <span class="price-tag buy">Buy <span id="markets-buy-mod">-20%</span></span>
                            <span class="price-tag sell">Sell <span id="markets-sell-mod">-15%</span></span>
                        </div>
                    </div>
                    <div class="markets-list" id="markets-list">
                        <!-- Other towns populated by JS -->
                    </div>
                    <div class="markets-footer">
                        <button id="open-map-btn" class="btn btn-small">Open Full Map</button>
                    </div>
                </section>
            </div>

            <!-- Center Column: Today's Decision -->
            <div class="column column-center">
                <section class="panel dock-panel">
                    <h2>The Dock</h2>
                    <div id="boats-container">
                        <p class="waiting">Waiting for boats...</p>
                    </div>
                </section>

                <section class="panel tank-panel">
                    <h2>Your Tanks</h2>
                    <div class="tank-display">
                        <div class="tank-visual">
                            <div class="tank-water">
                                <div class="tank-fill" id="tank-fill"></div>
                            </div>
                            <div class="lobster-icons" id="lobster-icons"></div>
                        </div>
                        <div class="tank-stats">
                            <div class="inventory-breakdown" id="inventory-breakdown" style="display: none;">
                                <span class="grade-a"><span id="label-a">Sel:</span> <span id="inventory-a">0</span></span>
                                <span class="grade-b"><span id="label-b">Qtr:</span> <span id="inventory-b">0</span></span>
                                <span class="grade-c"><span id="label-c">Chx:</span> <span id="inventory-c">0</span></span>
                            </div>
                            <p class="total">Total: <span id="inventory-total">0</span> / <span id="capacity">500</span> lbs</p>
                        </div>
                    </div>
                </section>

                <section class="panel buyers-panel">
                    <h2>Buyers</h2>
                    <div id="buyers-list">
                        <p class="waiting">No buyers today...</p>
                    </div>
                </section>

                <!-- Action Bar (Desktop - in flow) -->
                <div class="action-bar">
                    <button id="next-day-btn" class="btn btn-large">Next Day</button>
                </div>
            </div>

            <!-- Right Column: Context/Consequences -->
            <div class="column column-right">
                <section class="panel forecast-panel">
                    <h2>Forecast</h2>
                    <div class="forecast-current">
                        <span class="forecast-label">Today</span>
                        <span class="forecast-weather">
                            <span id="forecast-today-icon">‚òÄÔ∏è</span>
                            <span id="forecast-today-name">Sunny</span>
                        </span>
                    </div>
                    <div class="forecast-tomorrow">
                        <span class="forecast-label">Tomorrow</span>
                        <span class="forecast-weather">
                            <span id="forecast-tomorrow-icon">‚òÄÔ∏è</span>
                            <span id="forecast-tomorrow-name">Sunny</span>
                        </span>
                    </div>
                    <div class="market-trend-display">
                        <span class="forecast-label">Market</span>
                        <span id="forecast-trend" class="trend-stable">‚û°Ô∏è Stable</span>
                    </div>
                </section>

                <section class="panel leaderboard-panel">
                    <h2>Leaderboard</h2>
                    <div id="leaderboard-list">
                        <p class="waiting">Loading...</p>
                    </div>
                    <div class="prestige-display" id="prestige-display">
                        <span class="prestige-title" id="prestige-title">Newcomer</span>
                        <span class="prestige-stars">‚≠ê <span id="prestige-points">0</span></span>
                    </div>
                </section>
            </div>
        </main>

        <!-- Game Log - Full Width Bottom -->
        <section class="panel log-panel">
            <h2>Log</h2>
            <div id="game-log">
                <p>Welcome to Maine! Build your lobster empire!</p>
            </div>
        </section>

        <!-- Shop Modal -->
        <div id="shop-modal" class="modal" style="display: none;">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h2>Equipment Shop</h2>
                    <button id="close-shop-btn" class="btn btn-small">X</button>
                </div>
                <div id="equipment-list" class="equipment-list">
                    <!-- Equipment items populated by JS -->
                </div>
            </div>
        </div>

        <!-- Bank Modal -->
        <div id="bank-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <div class="modal-header">
                    <h2>First Maine Bank</h2>
                    <button id="close-bank-btn" class="btn btn-small">X</button>
                </div>
                <div class="bank-info">
                    <p>Cash: $<span id="bank-cash">0</span></p>
                    <p>Current Debt: $<span id="bank-debt">0</span></p>
                    <p>Max Loan: $<span id="max-loan">0</span></p>
                    <p>Interest: <span id="interest-rate">5</span>% per week</p>
                </div>
                <div class="bank-actions">
                    <div class="bank-row">
                        <input type="number" id="loan-amount" placeholder="Amount" value="5000">
                        <button id="loan-btn" class="btn btn-primary">Take Loan</button>
                    </div>
                    <div class="bank-row">
                        <input type="number" id="pay-amount" placeholder="Amount">
                        <button id="pay-btn" class="btn btn-primary">Pay Debt</button>
                    </div>
                </div>
            </div>
        </div>

        <!-- Stats Modal -->
        <div id="stats-modal" class="modal" style="display: none;">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h2>Business Statistics</h2>
                    <button id="close-stats-btn" class="btn btn-small">X</button>
                </div>
                <div class="stats-content">
                    <div class="stats-section">
                        <h3>Trading</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">Lobsters Bought</span>
                                <span class="stat-value" id="stat-bought">0 lbs</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Lobsters Sold</span>
                                <span class="stat-value" id="stat-sold">0 lbs</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Money Earned</span>
                                <span class="stat-value" id="stat-earned">$0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Money Spent</span>
                                <span class="stat-value" id="stat-spent">$0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Total Profit</span>
                                <span class="stat-value positive" id="stat-profit">$0</span>
                            </div>
                        </div>
                    </div>
                    <div class="stats-section">
                        <h3>Records</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">Best Day Profit</span>
                                <span class="stat-value positive" id="stat-best-day">$0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Worst Day Loss</span>
                                <span class="stat-value negative" id="stat-worst-day">$0</span>
                            </div>
                        </div>
                    </div>
                    <div class="stats-section">
                        <h3>Relationships</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">Favorite Captain</span>
                                <span class="stat-value" id="stat-fav-captain">None yet</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Best Buyer</span>
                                <span class="stat-value" id="stat-best-buyer">None yet</span>
                            </div>
                        </div>
                    </div>
                    <div class="stats-section">
                        <h3>Competition</h3>
                        <div class="stats-grid">
                            <div class="stat-item">
                                <span class="stat-label">Rivals Outbid</span>
                                <span class="stat-value positive" id="stat-rivals-beat">0</span>
                            </div>
                            <div class="stat-item">
                                <span class="stat-label">Lost to Rivals</span>
                                <span class="stat-value negative" id="stat-rivals-lost">0</span>
                            </div>
                        </div>
                    </div>
                    <div class="stats-section retirement-section" id="retirement-section" style="display: none;">
                        <h3>Retirement Options</h3>
                        <p class="retirement-intro">Cash out and start a new game with prestige bonuses!</p>
                        <div class="retirement-options" id="retirement-options">
                            <!-- Populated by JS -->
                        </div>
                    </div>
                    <div class="stats-credit">
                        <p>A tycoon game by Claude</p>
                    </div>
                </div>
            </div>
        </div>

        <!-- Map Modal -->
        <div id="map-modal" class="modal" style="display: none;">
            <div class="modal-content modal-large">
                <div class="modal-header">
                    <h2>Maine Coast Map</h2>
                    <button id="close-map-btn" class="btn btn-small">X</button>
                </div>
                <div class="map-container">
                    <div class="map-visual" id="map-visual">
                        <!-- Map background and town markers rendered by JS -->
                        <div class="map-coastline"></div>
                    </div>
                    <div class="map-legend">
                        <h3>Towns</h3>
                        <div id="town-list" class="town-list">
                            <!-- Town list populated by JS -->
                        </div>
                        <div class="travel-info" id="travel-info">
                            <p class="travel-requirement">Requires: Delivery Van</p>
                        </div>
                    </div>
                </div>
            </div>
        </div>

        <!-- Game Over Modal -->
        <div id="game-over-modal" class="modal" style="display: none;">
            <div class="modal-content">
                <h2 id="game-over-title">Game Over</h2>
                <p id="game-over-message"></p>
                <button id="restart-btn" class="btn btn-primary">Play Again</button>
            </div>
        </div>

        <!-- Day Summary Modal -->
        <div id="day-summary-modal" class="modal modal-fullscreen" style="display: none;">
            <div class="modal-content day-summary">
                <h2>Day <span id="summary-day">1</span> Complete</h2>
                <div class="summary-verdict" id="summary-verdict"></div>

                <!-- What You Achieved -->
                <div class="summary-section summary-achieved">
                    <h3>What You Achieved</h3>
                    <div class="summary-stats">
                        <div class="summary-row">
                            <span class="summary-label">Spent Today</span>
                            <span class="summary-value negative" id="summary-spent">$0</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Earned Today</span>
                            <span class="summary-value positive" id="summary-earned">$0</span>
                        </div>
                        <div class="summary-row summary-total">
                            <span class="summary-label">Net Profit</span>
                            <span class="summary-value" id="summary-net">$0</span>
                        </div>
                    </div>
                </div>

                <!-- What You Missed -->
                <div class="summary-section summary-missed" id="summary-missed-section" style="display: none;">
                    <h3>What You Missed</h3>
                    <div class="summary-missed-content">
                        <div class="missed-boats" id="summary-missed-boats"></div>
                        <div class="missed-rival" id="summary-rival-losses" style="display: none;">
                            <span class="rival-icon">üòà</span>
                            <span class="rival-text">Slick Rick stole <span id="summary-rival-count">0</span> boat(s)!</span>
                        </div>
                        <div class="missed-total">
                            <span class="summary-label">Potential Lost</span>
                            <span class="summary-value warning" id="summary-missed-value">$0</span>
                        </div>
                    </div>
                </div>

                <!-- Inventory Status -->
                <div class="summary-section summary-inventory" id="summary-inventory-section">
                    <h3>Inventory Status</h3>
                    <div class="summary-inventory-content">
                        <div class="summary-row">
                            <span class="summary-label">Stock</span>
                            <span class="summary-value" id="summary-stock">0 lbs</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Freshness</span>
                            <span class="summary-value" id="summary-stock-freshness">100%</span>
                        </div>
                    </div>
                </div>

                <!-- Tomorrow's Forecast -->
                <div class="summary-section summary-forecast">
                    <h3>Tomorrow's Forecast</h3>
                    <div class="summary-forecast-content">
                        <div class="summary-row">
                            <span class="summary-label">Weather</span>
                            <span class="summary-value" id="summary-weather">Sunny</span>
                        </div>
                        <div class="summary-row">
                            <span class="summary-label">Market</span>
                            <span class="summary-value" id="summary-market">Stable</span>
                        </div>
                    </div>
                </div>

                <!-- Total Cash -->
                <div class="summary-row summary-cash">
                    <span class="summary-label">Total Cash</span>
                    <span class="summary-value" id="summary-total-cash">$5,000</span>
                </div>

                <button class="btn btn-large btn-ceremony" id="summary-continue">Start Day <span id="summary-next-day">2</span></button>
            </div>
        </div>
    </div>

    <!-- Mobile: Sticky Next Day Button -->
    <div class="sticky-action" id="sticky-action">
        <button id="next-day-btn-mobile" class="btn btn-large btn-sticky">Next Day</button>
    </div>

    <script src="js/main.js"></script>
</body>
</html>
